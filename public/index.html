<!DOCTYPE html>
<html>
	<head>
		<script src='http://code.jquery.com/jquery-1.9.1.min.js'></script>
		<style>

			html, body, div, span, applet, object, iframe,
			h1, h2, h3, h4, h5, h6, p, blockquote, pre,
			a, abbr, acronym, address, big, cite, code,
			del, dfn, em, img, ins, kbd, q, s, samp,
			small, strike, strong, sub, sup, tt, var,
			b, u, i, center,
			dl, dt, dd, ol, ul, li,
			fieldset, form, label, legend,
			table, caption, tbody, tfoot, thead, tr, th, td,
			article, aside, canvas, details, embed, 
			figure, figcaption, footer, header, hgroup, 
			menu, nav, output, ruby, section, summary,
			time, mark, audio, video {
				margin: 0;half
				padding: 0;
				border: 0;
				font-size: 100%;
				font: inherit;
				vertical-align: baseline;
			}

			body {
				font-family: "Lucida Console", Monaco, monospace;
				background-color: #ebebe0;
			}

			form {
				text-align: center;
			}

			input {
				font-family: "Lucida Console", Monaco, monospace;
				font-size: 2.65em;
				text-align: center;
				letter-spacing: 6px;
				color: #cc0000;

				height: 54px;
				width: 27%;
				border: 1px solid black;
				border-radius: 3px;
			}

			td {
				font-size: 2.55em;
				color: white;
				vertical-align: middle;

				background-color: white;
				height: 50px;
				width: 50px;
				border: 3px hidden #f4f4f0;
				border-radius: 9px;
			}

			.full {
				background-color: #248f24;
			}

			.half {
				background-color: #e6b700;
			}

			.none {
				background-color: #cc0000;
			}

			.container {
				margin-top: 9%;
			}

			#feedback {
				margin-top: 1.1%;
				margin-left: auto;
				margin-right: auto;
				text-align: center;
				border-spacing: 8px;
			}

			#title {
				text-align: center;
				font-size: 5.7em;
			}

			#newgame, #guess {
				text-align: center;
				font-size: 2.3em;
				letter-spacing: .08em;

				background-color: white;
				border: 1px solid black;
				border-radius: 3px;
				height: 49px;
				width: 31%;
				padding-top: 4px;
				margin-top: 1.9%;
				margin-left: auto;
				margin-right: auto;
			}

			#guess {
				width: 23%;
			}

			#guessform{
				margin-top: 2%;
			}

		</style>
	<head>
	<body>

		<div class="container">
			<div id="title">wor<span style="color:#cc0000">db</span>reaker</div>
			<div id="newgame"> make new game </div>
			<form id="guessform">
				<input type="text" maxlength="8" value="">
			</form> 
			<div id="guess" onclick="guess()"> guess </div>
			<table id="feedback"></table>
		</div>

		<script>

			var gameID = function(set) { 
				var id = set;
				return function(set){
					if (set) return id = set;
					else return id;
				}; 
			}();

			$(document).ready(function() { //prevents default behavior of hitting enter from a form field, runs guess() instead
				$(document).on('keypress', 'form input[type="text"]', function(e) {
				  if(e.keyCode == 13) {
				    e.preventDefault();
				    guess();
				    return false;
				  }
				});
			});

			$("#newgame").click(function() {
				$("#title").html('wor<span style="color:#cc0000">db</span>reaker')
	  		$('#guess').html('guess');
	      $.ajax({url: "new", success: function(result) {
	      	$.ajax({url: gameID(result) + '/x', success: function(result) {
			      $("#newgame").html(result.arr.length + ' letter word');
			     	$("input").attr("maxlength", result.arr.length);
			      displayEmpties(result.arr.length);
			  	}});
		  	}});
			});

			function guess() {
				var form = document.getElementById('guessform');
				var input = form.elements[0].value;	
				form.elements[0].value = "";
				$.ajax({url: gameID() +'/' + input, success: function(result) {
					if (result.gameOver) winner(result.arr);
					else displayFeedback(result.arr);
		  	}});
			}
		
			function winner(resArray) {
				$('#feedback').html('');
				for (i=0; i<resArray.length; i++) {
					$('#feedback').append('<td class="full">' + resArray[i][0] + '</td>');
				}
				$("#newgame").html('make new game');
				$("#guess").html('you won!');
				$("#title").html('wor<span style="color:#248f24">db</span>reaker');
			}

			function displayFeedback (resArray) {
				$('#feedback').html('');
				for (i=0; i<resArray.length; i++) {
					if (resArray[i][1] == '2') $('#feedback').append('<td class="full">' + resArray[i][0] + '</td>');
					if (resArray[i][1] == '1') $('#feedback').append('<td class="half">' + resArray[i][0] + '</td>');
					if (resArray[i][1] == '0') $('#feedback').append('<td class="none">' + resArray[i][0] + '</td>');
				}
			}

			function displayEmpties(letters) {
				$('#feedback').html('');
				for (i=0; i<letters; i++) {
					$('#feedback').append('<td> </td>');
				}
			}

		</script>
	</body>
</html>

